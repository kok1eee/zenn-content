---
title: "OpenCode BlackとAnthropicの攻防 - なぜブロックされたのにClaudeが使えるのか？"
emoji: "⚔️"
type: "tech"
topics: ["opencode", "claude", "anthropic", "ai", "llm"]
published: true
---

## はじめに

2025年1月、AI開発者コミュニティで大きな騒動が起きました。

Anthropicが突然、サードパーティツールからのClaude Code認証を遮断。オープンソースのAIコーディングエージェント「**OpenCode**」のユーザーが一斉に締め出されたのです。

しかし、その数時間後にはOpenCodeチームが「**OpenCode Black**」という新サービスを発表。「どのモデルでも使える」と謳い、Claudeへのアクセスも可能に。

**なぜブロックされたはずなのに、Claudeが使えるのか？**

この記事では、技術的な仕組みとビジネスモデルの両面から、この興味深い攻防を解説します。

## OpenCodeとは

OpenCodeは、オープンソースのAIコーディングエージェントです。ターミナルベースのインターフェースで動作し、Claude Codeと同様の機能を提供します。

### 主な特徴

- **オープンソース**: GitHubで60,000以上のスター
- **マルチプロバイダー対応**: Claude、GPT、Gemini、ローカルモデルなど75以上のプロバイダーに対応
- **ターミナルファースト**: Neovimユーザー向けに最適化されたTUI

```bash
# インストール
curl -fsSL https://opencode.ai/install | bash

# または
brew install anomalyco/tap/opencode
```

Claude Codeが「Apple的アプローチ」（洗練されているが囲い込み）なら、OpenCodeは「Android的アプローチ」（自由度が高いがやや荒削り）と言えるでしょう。

## 何が起きたのか - 事件の経緯

### 背景：サブスクリプション・アービトラージ

Claude Code（Anthropicの公式CLI）には、非常にお得なサブスクリプションプランがあります。

| プラン | 月額 | API換算価値 |
|--------|------|-------------|
| Claude Max 20x | $200 | 約$2,600相当 |

つまり、**90%割引**でAPIを使えるようなものです。

しかし、このサブスクリプションは「Claude Code CLIで人間が使う」ことを前提とした価格設定でした。

### 問題：サードパーティツールによる「食べ放題」

OpenCodeなどのサードパーティツールは、**クライアントIDを偽装**してClaude Code認証を使っていました。

```
[ユーザー] → [OpenCode] → (Claude Codeを偽装) → [Anthropic API]
```

これにより：

- $200/月の定額で**無制限**にAPIアクセス
- 自律エージェントによる**一晩中の自動コーディング**
- 本来なら$1,000以上かかる使用量を定額で消費

いわば「定額食べ放題ビュッフェで、業務用の大量消費をする」ようなものでした。

### Anthropicの対応（2025年1月9日）

Anthropicは技術的なセーフガードを導入し、サードパーティツールからのアクセスを遮断しました。

> 「Claude Code harness（ハーネス）の偽装に対するセーフガードを強化しました」
> — Thariq Shihipar (Anthropic)

結果として：
- OpenCodeユーザー → 利用不可
- xAI社員（Cursor経由） → 利用不可
- その他のサードパーティツール → 軒並み利用不可

コミュニティの反応は二分しました：

- **批判派**: 「非常に顧客に敵対的」（DHH / Ruby on Rails作者）
- **擁護派**: 「アカウント削除やAPI料金の遡及請求ではなく、丁寧なメッセージだけで済んでいる。最も穏やかな対応」

## OpenCode Blackの登場

Anthropicのブロックからわずか数時間後、OpenCodeチームは「**OpenCode Black**」を発表しました。

### 料金プラン

| プラン | 月額 | 使用量 |
|--------|------|--------|
| Black 20 | $20 | 基準量 |
| Black 100 | $100 | Black 20の6倍 |
| Black 200 | $200 | Black 20の21倍 |

「Claude、GPT、Geminiなど世界最高のコーディングモデルにアクセス可能」と謳っています。

### なぜClaudeが使えるのか？

ここが重要なポイントです。

**以前の方法（規約違反・ブロック済み）：**

```
[ユーザー] → [OpenCode] → (偽装) → [消費者向けサブスク認証] → [Anthropic]
                              ↑
                         これがブロックされた
```

**現在の方法（OpenCode Black）：**

```
[ユーザー] → [OpenCode Black] → [エンタープライズAPIゲートウェイ] → [正規API] → [Anthropic]
                                          ↑
                                    正規のAPI契約
```

つまり、**正規のAPI料金を支払って、エンタープライズAPIゲートウェイ経由でアクセス**しているのです。

| 比較 | 以前の方法 | OpenCode Black |
|------|-----------|----------------|
| 認証方式 | 消費者向けサブスク偽装 | 正規API契約 |
| 料金 | $20〜$200定額で無制限 | 使用量に応じた制限あり |
| 規約 | **違反** | **合法** |

## ビジネスモデルの分析

### OpenCode側は損しないのか？

これは鋭い疑問です。

**リスク要因：**

Claude Opusで1日ヘビーにコーディングすると$20〜$50のAPI料金がかかります。毎日使えば月$1,000以上。

定額$200で$1,000相当使われたら、OpenCode側が**$800の赤字**になります。

### コスト最適化の工夫

OpenCodeは以下の方法でリスクを軽減しています：

#### 1. 使用量の上限設定

「無制限」ではありません。Black 200でも「Black 20の21倍」という**倍率制限**があります。

#### 2. キャッシュヒット率の最適化

OpenCodeのXアカウントによると：

> 「使用量の83%がキャッシュヒットしています。コーディングワークロードは非常に効率的なので、良いキャッシュトークンレートを交渉できました」

コーディング作業は同じコンテキスト（システムプロンプト、ファイル内容など）を繰り返し送信するため、キャッシュが効きやすいのです。

#### 3. ボリュームディスカウント

大量のリクエストをまとめることで、プロバイダーと有利なレートを交渉しています。

#### 4. 段階的なリリース

「Limited run」「バッチでロールアウト」と、一度に大量のユーザーを受け入れず慎重に拡大しています。

### 保険モデル的な構造

これは**保険のビジネスモデル**に近いと言えます：

- **平均的なユーザー**: 使用量が想定内 → 利益
- **ヘビーユーザー**: 使用量が想定超え → 損失
- **全体**: 平均で利益が出るように設計

だからこそ「Limited run」として慎重にロールアウトしているのでしょう。

## 今後の展望

### OpenCodeの戦略

OpenCodeはAnthropicだけに依存しない戦略を取っています：

1. **OpenAI連携**: ChatGPT Plus/ProのOAuth対応（v1.1.11で追加）
2. **マルチプロバイダー**: Gemini、Groq、ローカルモデルなど
3. **OpenCode Zen**: 従量課金の独自ゲートウェイサービス

### Anthropicの狙い

Anthropicの対応は「顧客敵対的」という批判もありますが、ビジネス的には理解できます：

- **コスト管理**: 定額プランでの過剰消費を防ぐ
- **品質管理**: サードパーティツールのバグがClaudeの評判に影響するのを防ぐ
- **エコシステム制御**: Claude Codeを中心としたエコシステムの構築

## まとめ

| 観点 | 以前 | 現在（OpenCode Black） |
|------|------|----------------------|
| Claude利用方法 | サブスク偽装（違反） | 正規API（合法） |
| 料金体系 | 定額無制限 | 使用量制限あり |
| リスク | Anthropic側 | OpenCode側（要コスト管理） |

OpenCode Blackは「抜け道」ではなく、**ビジネスモデルの転換**です。

- **以前**: 消費者向けサブスクを偽装して無制限利用 → 違反 → ブロック
- **現在**: 正規APIで料金を支払い、適切な制限の下で提供 → 合法

OpenCodeチームは、Anthropicのブロックを受けて数時間で対応策を打ち出しました。これは彼らの技術力と適応力の高さを示しています。

一方で、サブスクリプション・アービトラージの時代は終わりを迎えつつあります。**「フロンティアモデル + エージェントループ + 定額制」は共存できない**という現実が明らかになりました。

今後は、各プロバイダーの料金体系とサードパーティツールの競争がさらに激化していくでしょう。開発者としては、特定のツールやプロバイダーに依存しすぎないことが重要かもしれません。

## 参考リンク

- [OpenCode公式サイト](https://opencode.ai/)
- [OpenCode Black](https://opencode.ai/black)
- [OpenCode Zen](https://opencode.ai/docs/zen/)
- [OpenCode GitHub](https://github.com/anomalyco/opencode)
- [VentureBeat: Anthropic cracks down on unauthorized Claude usage](https://venturebeat.com/technology/anthropic-cracks-down-on-unauthorized-claude-usage-by-third-party-harnesses)
