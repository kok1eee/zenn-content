---
title: "Opus 4.6 ã® Agent Teams ã§ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼ã‚’å¼·åŒ–ã™ã‚‹"
emoji: "ğŸ¤"
type: "tech"
topics: ["claudecode", "ai", "cli", "multiagent", "opus"]
published: true
---

## ã¯ã˜ã‚ã«

> æ¥­å‹™è‡ªå‹•åŒ–Pythonã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã€‚ãƒã‚¤ãƒ–ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ­´1å¹´ â‰’ ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢æ­´ã€‚

2026å¹´2æœˆ5æ—¥ã€Anthropic ãŒ Claude Opus 4.6 ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ãŸã€‚ç›®ç‰æ©Ÿèƒ½ã®ä¸€ã¤ãŒ **Agent Teams**ã€‚è¤‡æ•°ã® Claude Code ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒ peer-to-peer ã§å”èª¿ä½œæ¥­ã§ãã‚‹ã€‚

ä»¥å‰ã®è¨˜äº‹ã§ç´¹ä»‹ã—ãŸè‡ªä½œãƒ—ãƒ©ã‚°ã‚¤ãƒ³ [o-m-cc](https://github.com/kok1eee/o-m-cc) ã¯ã€Task tool (subagent) ãƒ™ãƒ¼ã‚¹ã®ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼ã ã£ãŸã€‚ä»Šå› Agent Teams ã«å…¨é¢ç§»è¡Œã—ã¦ v0.8.0 ã«ã—ãŸã€‚subagent ã§ã¯ã€Œçµæœã‚’è¿”ã™ã ã‘ã€ã ã£ãŸã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒã€äº’ã„ã«è­°è«–ã—ã¦çµè«–ã‚’å‡ºã›ã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚

ã“ã®è¨˜äº‹ã§ã¯ Agent Teams ã®ä»•çµ„ã¿ã¨ã€æ—¢å­˜ã®ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ã©ã†å¼·åŒ–ã§ãã‚‹ã‹ã‚’å…±æœ‰ã™ã‚‹ã€‚è‡ªåˆ†ã§ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼ã‚’çµ„ã‚“ã§ã„ã‚‹äººã®å‚è€ƒã«ãªã‚Œã°ã€‚

https://zenn.dev/kok1eee/articles/o-m-cc-claude-code-plugin

## Agent Teams ã¨ã¯

### å¾“æ¥: Task tool (subagent)

```
ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
  â”œâ”€ Task(explore): ã€Œsrc/auth/ ã«ã‚ã‚Šã¾ã™ã€ â†’ çµæœã‚’è¿”ã—ã¦çµ‚äº†
  â”œâ”€ Task(code-reviewer): ã€Œå•é¡Œ3ä»¶ã€ â†’ çµæœã‚’è¿”ã—ã¦çµ‚äº†
  â””â”€ ãƒ¡ã‚¤ãƒ³ãŒå…¨ã¦ã‚’çµ±åˆ
```

subagent ã¯ã€Œçµæœã‚’è¿”ã™ã ã‘ã®ä½¿ã„æ¨ã¦ãƒ¯ãƒ¼ã‚«ãƒ¼ã€ã€‚äº’ã„ã®å­˜åœ¨ã‚’çŸ¥ã‚‰ãªã„ã€‚

### Agent Teams (TeammateTool)

```
Leadï¼ˆãƒ¡ã‚¤ãƒ³ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼‰
  â”œâ”€ spawnTeam: ãƒãƒ¼ãƒ ä½œæˆ
  â”œâ”€ spawnTeammate: code-reviewer â†’ ã€ŒXSS ã®å¯èƒ½æ€§ã‚ã‚Šã€
  â”œâ”€ spawnTeammate: security-reviewer â†’ ã€Œãã‚Œç¢ºèªã—ãŸã€CSP ã§ç·©å’Œå¯èƒ½ã€
  â”‚       â†• peer-to-peer ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸äº¤æ›
  â””â”€ Lead ãŒçµ±åˆãƒ¬ãƒãƒ¼ãƒˆä½œæˆ
```

teammates ã¯**äº’ã„ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚Šåˆãˆã‚‹**ã€‚è­°è«–ã—ã¦ã€ã‚ˆã‚Šè‰¯ã„çµè«–ã«è¾¿ã‚Šç€ãã€‚

### æ¯”è¼ƒ

|                   | Subagent | Agent Teams |
| :---------------- | :------- | :---------- |
| **é€šä¿¡** | ãƒ¡ã‚¤ãƒ³ã«ã ã‘è¿”ã™ | teammate åŒå£«ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸äº¤æ› |
| **èª¿æ•´** | ãƒ¡ã‚¤ãƒ³ãŒå…¨ç®¡ç† | å…±æœ‰ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ + è‡ªå·±èª¿æ•´ |
| **å‘ã„ã¦ã„ã‚‹** | çµæœã ã‘æ¬²ã—ã„å˜ç™ºã‚¿ã‚¹ã‚¯ | è­°è«–ãƒ»å”èª¿ãŒå¿…è¦ãªè¤‡é›‘ãªä½œæ¥­ |
| **ãƒˆãƒ¼ã‚¯ãƒ³ã‚³ã‚¹ãƒˆ** | ä½ã„ | é«˜ã„ï¼ˆå„ teammate ãŒç‹¬ç«‹ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼‰ |

> å‚è€ƒ: [Orchestrate teams of Claude Code sessions](https://code.claude.com/docs/en/agent-teams)

## æœ‰åŠ¹åŒ–

Agent Teams ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç„¡åŠ¹ã€‚

```json
// ~/.claude/settings.json
{
  "env": {
    "CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS": "1"
  }
}
```

## o-m-cc ã‚’ Agent Teams ã§å¼·åŒ–ã™ã‚‹

### o-m-cc ã®ãŠã•ã‚‰ã„

[o-m-cc](https://github.com/kok1eee/o-m-cc) ã¯ Claude Code ç”¨ã®ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã€‚16ã®å°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã€Sisyphus Loopï¼ˆã‚¿ã‚¹ã‚¯å®Œäº†ã¾ã§æ­¢ã¾ã‚‰ãªã„ï¼‰ã€ä»•æ§˜é§†å‹•é–‹ç™ºãƒ•ãƒ­ãƒ¼ã€hooks ã«ã‚ˆã‚‹è‡ªå‹•åŒ–ã‚’æä¾›ã™ã‚‹ã€‚

v0.7 ã¾ã§ã¯ Task tool (subagent) ã§ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’èµ·å‹•ã—ã¦ã„ãŸã€‚subagent ã¯çµæœã‚’è¿”ã™ã ã‘ã§ã€äº’ã„ã®å­˜åœ¨ã‚’çŸ¥ã‚‰ãªã„ã€‚ã“ã‚Œã‚’ Agent Teams ã«ç½®ãæ›ãˆã‚‹ã“ã¨ã§ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆåŒå£«ãŒè­°è«–ãƒ»å”èª¿ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚

### ä½•ãŒå¤‰ã‚ã£ãŸã‹

| é …ç›® | v0.7 (Task tool) | v0.8 (Agent Teams) |
|------|-----------------|-------------------|
| ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹• | `Task tool ã§ subagent ã‚’å‘¼ã³å‡ºã—` | `spawnTeam â†’ teammate ã‚’ spawn` |
| é€šä¿¡ | è¦ªâ†’å­ã®ä¸€æ–¹å‘ | peer-to-peer ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚° |
| ä¸¦åˆ—å®Ÿè¡Œ | `background=true` ã§ä¸¦åˆ— | teammates ãŒè‡ªå¾‹çš„ã«ä¸¦åˆ—ä½œæ¥­ |
| ã‚¿ã‚¹ã‚¯ç®¡ç† | ãƒ¡ã‚¤ãƒ³ãŒå…¨ç®¡ç† | å…±æœ‰ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ + è‡ªå·±èª¿æ•´ |
| ã‚³ãƒãƒ³ãƒ‰ã® allowed-tools | `Task` | `TeammateTool` |

## å¼·åŒ–ãƒ‘ã‚¿ãƒ¼ãƒ³: subagent â†’ Agent Teams

ã“ã“ã‹ã‚‰å®Ÿè·µã€‚o-m-cc ã§å®Ÿéš›ã«ç§»è¡Œã—ãŸãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç´¹ä»‹ã™ã‚‹ã€‚

### ãƒ‘ã‚¿ãƒ¼ãƒ³1: ç›¸äº’ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆ/reviewï¼‰

æœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ãª Agent Teams æ´»ç”¨ã€‚2ã¤ã®å°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒäº’ã„ã®ç™ºè¦‹ã‚’å…±æœ‰ã™ã‚‹ã€‚

**Before (subagent)**:
```
Task tool ã§ä¸¦åˆ—å®Ÿè¡Œï¼ˆä¸¡æ–¹ background=trueï¼‰ï¼š
1. code-reviewer subagent â†’ çµæœã‚’è¿”ã™
2. security-reviewer subagent â†’ çµæœã‚’è¿”ã™
â†’ ãƒ¡ã‚¤ãƒ³ãŒçµ±åˆ
```

**After (Agent Teams)**:
```markdown
## Step 1: ãƒãƒ¼ãƒ ä½œæˆ
spawnTeam: "review"

## Step 2: Teammates Spawn
spawnTeammate: code-reviewer
  prompt: |
    agents/code-reviewer.md ã®æŒ‡ç¤ºã«å¾“ã„ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€‚
    ç™ºè¦‹ã—ãŸå•é¡Œã‚’ security-reviewer teammate ã«ã‚‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§å…±æœ‰ã€‚

spawnTeammate: security-reviewer
  prompt: |
    agents/security-reviewer.md ã®æŒ‡ç¤ºã«å¾“ã„ãƒã‚§ãƒƒã‚¯ã€‚
    ç™ºè¦‹ã—ãŸå•é¡Œã‚’ code-reviewer teammate ã«ã‚‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§å…±æœ‰ã€‚

## Step 3: è­°è«–ãƒ»é›†ç´„
â†’ teammates ãŒäº’ã„ã®ç™ºè¦‹ã‚’ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§å…±æœ‰
â†’ Lead ãŒä¸¡è€…ã®çµæœã‚’çµ±åˆãƒ¬ãƒãƒ¼ãƒˆã«
```

**ãƒã‚¤ãƒ³ãƒˆ**: spawn prompt ã«ã€Œä»–ã® teammate ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§å…±æœ‰ã€ã¨æ˜è¨˜ã™ã‚‹ã€‚ã“ã‚ŒãŒãªã„ã¨ subagent ã¨å¤‰ã‚ã‚‰ãªã„å‹•ãã«ãªã‚‹ã€‚

### ãƒ‘ã‚¿ãƒ¼ãƒ³2: ä¸¦åˆ— + é †æ¬¡ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ï¼ˆ/planï¼‰

ç‹¬ç«‹ã—ãŸãƒ•ã‚§ãƒ¼ã‚ºã¯ä¸¦åˆ—ã€ä¾å­˜é–¢ä¿‚ãŒã‚ã‚‹ãƒ•ã‚§ãƒ¼ã‚ºã¯é †æ¬¡ã€‚

```
Agent Teams:
  â”Œâ”€ learnings-researcher â”€â”
  â”‚       (ä¸¦åˆ— spawn)      â”‚â”€â”€â–¶ scout â”€â”€â–¶ designer â”€â”€â–¶ planner
  â””â”€ analyst â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```markdown
## Step 1: ãƒãƒ¼ãƒ ä½œæˆ
spawnTeam: "planning"

## Step 2: ä¸¦åˆ— Phase (0.5 + 1)
# åŒæ™‚ã« spawn â€” äº’ã„ã«ç‹¬ç«‹ã—ã¦ã„ã‚‹ã®ã§ä¸¦åˆ—å®Ÿè¡Œå¯èƒ½
spawnTeammate: learnings-researcher  # éå»ã®å­¦ã³æ¤œç´¢
spawnTeammate: analyst               # è¦ä»¶å®šç¾©

## Step 3: é †æ¬¡ Phase (1.5 â†’ 2 â†’ 3)
# Phase 0.5 + 1 å®Œäº†å¾Œã« spawn
spawnTeammate: scout     # requirements.md ã‚’èª­ã‚“ã§ã‚®ãƒ£ãƒƒãƒ—åˆ†æ
# scout å®Œäº†å¾Œ
spawnTeammate: designer  # ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ
# design.md å®Œäº†å¾Œ
spawnTeammate: planner   # ã‚¿ã‚¹ã‚¯åˆ†è§£
```

**ãƒã‚¤ãƒ³ãƒˆ**: ä¸¦åˆ— spawn ã§ãã‚‹ãƒ•ã‚§ãƒ¼ã‚ºã‚’è¦‹æ¥µã‚ã‚‹ã€‚ä¾å­˜é–¢ä¿‚ãŒãªã„ãªã‚‰åŒæ™‚ã« spawn ã—ã¦æ™‚é–“ã‚’çŸ­ç¸®ã€‚

### ãƒ‘ã‚¿ãƒ¼ãƒ³3: å¤§è¦æ¨¡ä¸¦åˆ— + è‡ªå¾‹èª¿æ•´ï¼ˆ/ultraworkï¼‰

5+ teammates ãŒå…±æœ‰ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆã§è‡ªå¾‹çš„ã«ä½œæ¥­ã™ã‚‹ã€‚ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼ã®æœ¬é ˜ã€‚

```markdown
## Step 1: ãƒãƒ¼ãƒ ä½œæˆ
spawnTeam: "ultrawork"

## Step 2: ã‚¿ã‚¹ã‚¯ç™»éŒ²
TaskCreate ã§å…¨ã‚¿ã‚¹ã‚¯ã‚’ç™»éŒ²ã€TaskUpdate ã§ä¾å­˜é–¢ä¿‚ã‚’è¨­å®š

## Step 3: Teammates Spawn
orchestration.yml ã®å„ã‚¿ã‚¹ã‚¯ã‚°ãƒ«ãƒ¼ãƒ—ã«å¯¾ã—ã¦ teammate ã‚’ spawn
å„ teammate ã® spawn prompt ã«:
- agents/{agent-name}.md ã®æŒ‡ç¤º
- æ‹…å½“ã‚¿ã‚¹ã‚¯ã®è©³ç´°
- å‚ç…§ã™ã¹ã standards
- ã€Œå®Œäº†ã—ãŸã‚‰ Lead ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€å•é¡Œã¯ä»–ã® teammate ã«ã‚‚å…±æœ‰ã€

## Step 4: ç›£è¦–ãƒ»èª¿æ•´
Lead ã¯å®šæœŸçš„ã«:
- teammates ã®é€²æ—ã‚’ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ç¢ºèª
- å•é¡ŒãŒã‚ã‚Œã°ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
- å®Œäº†ã—ãŸ teammate ã«è¿½åŠ ã‚¿ã‚¹ã‚¯ã‚’å‰²ã‚Šå½“ã¦

## Step 5: æ¤œè¨¼ãƒ»å®Œäº†
code-reviewer teammate ã§æœ€çµ‚ãƒ¬ãƒ“ãƒ¥ãƒ¼ â†’ DONE
```

**ãƒã‚¤ãƒ³ãƒˆ**: TaskCreate/TaskUpdate ã¨ TeammateTool ã®çµ„ã¿åˆã‚ã›ãŒæ ¸å¿ƒã€‚ã“ã“ã§é‡è¦ãªæ³¨æ„ç‚¹ãŒã‚ã‚‹ã€‚

### æ··åŒæ³¨æ„: Task tool ã¨ TaskCreate ã¯åˆ¥ç‰©

åå‰ãŒä¼¼ã¦ã„ã¦æ··ä¹±ã™ã‚‹ã€‚

| ãƒ„ãƒ¼ãƒ« | ç”¨é€” | Agent Teams ã§ã®æ‰±ã„ |
|--------|------|---------------------|
| **Task tool** | subagent ã‚’ spawn ã™ã‚‹ | TeammateTool ã«**ç½®æ›**ã•ã‚ŒãŸ |
| **TaskCreate/TaskUpdate/TaskList** | å…±æœ‰ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆã®ç®¡ç† | Agent Teams ã®**ä¸­æ ¸** |

Task tool ã¯å»ƒæ­¢å¯¾è±¡ã€‚TaskCreate ç³»ã¯ Agent Teams ã§ã‚€ã—ã‚é‡è¦åº¦ãŒä¸ŠãŒã£ãŸã€‚

## ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒæˆ¦ç•¥: å…¨éƒ¨ Agent Teams ã§ã„ã„ã®ã‹ï¼Ÿ

å…¨ã¦ã‚’ Agent Teams ã«ã™ã‚‹ã¨ãƒˆãƒ¼ã‚¯ãƒ³ã‚³ã‚¹ãƒˆãŒä¸ŠãŒã‚‹ã€‚ã—ã‹ã—ã€è³ªã‚’é‡è¦–ã™ã‚‹ãªã‚‰ Agent Teams ã‚’ç©æ¥µçš„ã«ä½¿ã†æ–¹ãŒã„ã„ã€‚

o-m-cc ã§ã¯ã‚¿ã‚¹ã‚¯è¦æ¨¡ã§åˆ‡ã‚Šæ›¿ãˆã‚‹ãƒ«ãƒ¼ãƒ«ã‚’è¨­ã‘ãŸã€‚

### åˆ¤æ–­ãƒ•ãƒ­ãƒ¼

```
ã‚¿ã‚¹ã‚¯ã‚’å—ã‘å–ã‚‹
  â”‚
  â”œâ”€ Glob/Grep 1å›ã§ç­”ãˆãŒå‡ºã‚‹ï¼Ÿ â†’ ã€Sã€‘ç›´æ¥å®Ÿè¡Œ
  â”‚
  â”œâ”€ åˆ¤æ–­ãƒ»åˆ†æãŒå¿…è¦ï¼Ÿ â”€â”€â”€â”€â”€â”€â”€â”€â†’ ã€Mã€‘Agent Teams (2-3 teammates)
  â”‚
  â””â”€ è¤‡æ•°å·¥ç¨‹ãƒ»ä¸¦åˆ—ä½œæ¥­ï¼Ÿ â”€â”€â”€â”€â”€â”€â†’ ã€Lã€‘Agent Teams (5+ teammates)
```

**è¿·ã£ãŸã‚‰ Agent Teams ã‚’é¸ã¶ã€‚** ãƒˆãƒ¼ã‚¯ãƒ³ã«ä½™è£•ãŒã‚ã‚‹ãªã‚‰è³ªã‚’å–ã‚‹ã€‚

| è¦æ¨¡ | ä¾‹ | æ–¹å¼ |
|------|-----|------|
| **S** | ã€Œã“ã®ã‚¯ãƒ©ã‚¹ã©ã“ï¼Ÿã€ | Lead ãŒç›´æ¥ Grep |
| **M** | ã€Œã“ã®ãƒã‚°ã®åŸå› èª¿ã¹ã¦ã€ | debugger Ã— 2 ã§ä»®èª¬ç«¶åˆ |
| **M** | ã€Œãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ã€ | code-reviewer + security-reviewer |
| **L** | ã€Œèªè¨¼æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¦ã€ | 5+ teammates + TaskCreate |

### ç›¸ä¹—åŠ¹æœãƒ‘ã‚¿ãƒ¼ãƒ³

Agent Teams ã®çœŸä¾¡ã¯ã€Œçµ„ã¿åˆã‚ã›ã€ã€‚1+1 ãŒ 3 ã«ãªã‚‹ã€‚

| ãƒ‘ã‚¿ãƒ¼ãƒ³ | çµ„ã¿åˆã‚ã› | åŠ¹æœ |
|---------|-----------|------|
| **ç›¸äº’ãƒ¬ãƒ“ãƒ¥ãƒ¼** | code-reviewer + security-reviewer | äº’ã„ã®ç™ºè¦‹ã‚’å…±æœ‰ãƒ»è£œå®Œ |
| **ä»®èª¬ç«¶åˆ** | debugger Ã— 2-3 | ç•°ãªã‚‹ä»®èª¬ã‚’ä¸¦åˆ—æ¤œè¨¼ã€åã‚Šã‚’æ’é™¤ |
| **å¤šè§’èª¿æŸ»** | explore + researcher + analyst | ã‚³ãƒ¼ãƒ‰ãƒ»å¤–éƒ¨æƒ…å ±ãƒ»è¦ä»¶ã‚’åŒæ™‚èª¿æŸ» |
| **è¨­è¨ˆæ‰¹è©•** | designer + critic | è¨­è¨ˆã—ãªãŒã‚‰ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¬ãƒ“ãƒ¥ãƒ¼ |
| **å®Ÿè£…+å“è³ª** | frontend + code-reviewer | å®Ÿè£…ã—ãªãŒã‚‰é€æ¬¡ãƒ¬ãƒ“ãƒ¥ãƒ¼ |

**ä»®èª¬ç«¶åˆãƒ‘ã‚¿ãƒ¼ãƒ³**ãŒç‰¹ã«å¼·åŠ›:

```
debugger-1: ã€Œèªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã®æœŸé™åˆ‡ã‚ŒãŒåŸå› ã€
debugger-2: ã€Œã„ã‚„ã€CORS è¨­å®šã®å•é¡Œã€‚ãƒˆãƒ¼ã‚¯ãƒ³ã¯æ­£å¸¸ã ã£ãŸã€
â†’ è­°è«–ã—ã¦çœŸå› ã‚’ç‰¹å®š
```

1äººã ã¨æœ€åˆã«è¦‹ã¤ã‘ãŸä»®èª¬ã«å¼•ã£å¼µã‚‰ã‚Œã‚‹ï¼ˆã‚¢ãƒ³ã‚«ãƒªãƒ³ã‚°ï¼‰ã€‚è¤‡æ•°ã§ç«¶åˆã•ã›ã‚‹ã¨ã€ç”Ÿãæ®‹ã£ãŸä»®èª¬ãŒæ­£è§£ã§ã‚ã‚‹ç¢ºç‡ãŒä¸ŠãŒã‚‹ã€‚ã“ã‚Œã¯[å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://code.claude.com/docs/en/agent-teams)ã§ã‚‚æ¨å¥¨ã•ã‚Œã¦ã„ã‚‹ã€‚

## hooks ã§ Agent Teams ã‚’è‡ªå‹•åŒ–ã™ã‚‹

Agent Teams å˜ä½“ã§ã‚‚å¼·åŠ›ã ãŒã€Claude Code ã® hooks ã¨çµ„ã¿åˆã‚ã›ã‚‹ã¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒè‡ªå‹•åŒ–ã§ãã‚‹ã€‚

### 2.1.33 ã®æ–° hook ã‚¤ãƒ™ãƒ³ãƒˆ

ãƒªãƒªãƒ¼ã‚¹ç¿Œæ—¥ã® 2.1.33 ã§ Agent Teams å°‚ç”¨ã® hook ã‚¤ãƒ™ãƒ³ãƒˆãŒè¿½åŠ ã•ã‚ŒãŸã€‚

| ã‚¤ãƒ™ãƒ³ãƒˆ | ç™ºç«ã‚¿ã‚¤ãƒŸãƒ³ã‚° | ç”¨é€” |
|---------|-------------|------|
| **TeammateIdle** | teammate ãŒä½œæ¥­å®Œäº†ã—ã¦ idle ã«ãªã£ãŸ | æ®‹ã‚¿ã‚¹ã‚¯ã®å†å‰²ã‚Šå½“ã¦ |
| **TaskCompleted** | ã‚¿ã‚¹ã‚¯ãŒ completed ã«ãªã£ãŸ | é€²æ—è¡¨ç¤ºã€ä¾å­˜ã‚¿ã‚¹ã‚¯ã®ã‚¢ãƒ³ãƒ–ãƒ­ãƒƒã‚¯ |

### o-m-cc ã§ã®å®Ÿè£…

```json
// hooks.json
{
  "TeammateIdle": [{
    "matcher": "",
    "hooks": [{
      "type": "command",
      "command": "bash ${CLAUDE_PLUGIN_ROOT}/hooks/teammate-idle.sh",
      "timeout": 5000
    }]
  }],
  "TaskCompleted": [{
    "matcher": "",
    "hooks": [{
      "type": "command",
      "command": "bash ${CLAUDE_PLUGIN_ROOT}/hooks/task-completed.sh",
      "timeout": 5000
    }]
  }]
}
```

`teammate-idle.sh` ã®å‹•ä½œ:

```bash
# æ®‹ã‚¿ã‚¹ã‚¯ã‚’ã‚«ã‚¦ãƒ³ãƒˆ
REMAINING=$((TOTAL_TASKS - COMPLETED_TASKS))

if [[ $REMAINING -gt 0 ]]; then
  # æ®‹ã‚¿ã‚¹ã‚¯ã‚ã‚Š â†’ systemMessage ã§å†å‰²ã‚Šå½“ã¦ã‚’ç¤ºå”†
  jq -n '{
    "systemMessage": "ğŸ’¤ teammate ãŒ idleã€‚æ®‹ã‚¿ã‚¹ã‚¯ Xä»¶ â€” å‰²ã‚Šå½“ã¦ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚"
  }'
else
  # å…¨ã‚¿ã‚¹ã‚¯å®Œäº† â†’ æœ€çµ‚ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ä¿ƒã™
  jq -n '{
    "systemMessage": "âœ… å…¨ã‚¿ã‚¹ã‚¯å®Œäº†ã€‚code-reviewer ã§æœ€çµ‚ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ã€‚"
  }'
fi
```

`task-completed.sh` ã¯é€²æ—ï¼ˆX/X, XX%ï¼‰ã‚’è¡¨ç¤ºã—ã€ä¾å­˜ã‚¿ã‚¹ã‚¯ã®ã‚¢ãƒ³ãƒ–ãƒ­ãƒƒã‚¯ã‚’é€šçŸ¥ã™ã‚‹ã€‚

### hooks å…¨ä½“åƒ

o-m-cc ã® hooks æ§‹æˆï¼ˆAgent Teams å¯¾å¿œå«ã‚€ï¼‰:

| ã‚¤ãƒ™ãƒ³ãƒˆ | Hook | èª¬æ˜ |
|---------|------|------|
| SessionStart | `resume-session.sh` | å‰å›ã‚»ãƒƒã‚·ãƒ§ãƒ³å¾©å…ƒ |
| Stop | `stop-guard.sh` | Sisyphus ã‚¬ãƒ¼ãƒ‰ï¼ˆãƒ¬ãƒ“ãƒ¥ãƒ¼ç¢ºèªï¼‰ |
| UserPromptSubmit | `focus-guard.sh` | ã‚¿ã‚¹ã‚¯é€²è¡Œä¸­ã®è„±ç·šé˜²æ­¢ |
| PreToolUse | `security_reminder_hook.py` | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡º |
| PostToolUse | `auto-verify.sh` | ãƒ•ã‚§ãƒ¼ã‚ºå®Œäº†æ™‚ã®è‡ªå‹•æ¤œè¨¼ |
| **TeammateIdle** | `teammate-idle.sh` | idle teammate ã¸ã®å†å‰²ã‚Šå½“ã¦ |
| **TaskCompleted** | `task-completed.sh` | é€²æ—ãƒ»ã‚¢ãƒ³ãƒ–ãƒ­ãƒƒã‚¯é€šçŸ¥ |

hooks ã¨ Agent Teams ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€Œteammate ãŒ idle â†’ æ®‹ã‚¿ã‚¹ã‚¯å‰²ã‚Šå½“ã¦ â†’ å®Œäº† â†’ é€²æ—è¡¨ç¤º â†’ å…¨å®Œäº† â†’ æœ€çµ‚ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€ãŒè‡ªå‹•ã§å›ã‚‹ã€‚

## agent memory: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«è¨˜æ†¶ã‚’æŒãŸã›ã‚‹

2.1.33 ã§è¿½åŠ ã•ã‚ŒãŸ `memory` frontmatterã€‚ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«æ°¸ç¶šãƒ¡ãƒ¢ãƒªã‚’æŒãŸã›ã‚‰ã‚Œã‚‹ã€‚

```yaml
# agents/code-reviewer.md
---
name: code-reviewer
tools: Read, Glob, Grep, Bash, Write
model: sonnet
memory: project
---
```

`memory: project` ã‚’è¨­å®šã™ã‚‹ã¨ã€ãã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®çŸ¥è¦‹ã‚’æ°¸ç¶šçš„ã«è¨˜æ†¶ã™ã‚‹ã€‚

### ã©ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«è¨˜æ†¶ã‚’æŒãŸã›ã‚‹ã‹

**è¨˜æ†¶ã‚ã‚Šï¼ˆ`memory: project`ï¼‰** â€” åˆ¤æ–­ãƒ»å­¦ç¿’ãŒè“„ç©ã™ã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ:

| ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ | è¨˜æ†¶ã™ã‚‹å†…å®¹ |
|-------------|------------|
| code-reviewer | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®ã‚³ãƒ¼ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ»è¦ç´„ |
| security-reviewer | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åˆ¤æ–­ã®å±¥æ­´ |
| designer | éå»ã®è¨­è¨ˆåˆ¤æ–­ |
| advisor | éå»ã®ç›¸è«‡ãƒ»æˆ¦ç•¥åˆ¤æ–­ |
| planner | ã‚¿ã‚¹ã‚¯åˆ†è§£ãƒ‘ã‚¿ãƒ¼ãƒ³ |
| analyst | è¦ä»¶åˆ†æã®çŸ¥è¦‹ |
| frontend | UIè¦ç´„ãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ |
| debugger | éå»ã®ãƒã‚°ãƒ‘ã‚¿ãƒ¼ãƒ³ |

**è¨˜æ†¶ãªã—** â€” èª­ã¿å–ã‚Šå°‚ç”¨ãƒ»çŸ­å‘½ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ:

explore, scout, critic, researcher, learnings-researcher, vision, document-writer, code-simplifier

åŸºæº–ã¯ã€Œå‰å›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæ¥­ã®çŸ¥è¦‹ãŒã€æ¬¡å›ã®ä½œæ¥­å“è³ªã‚’å‘ä¸Šã•ã›ã‚‹ã‹ã€ã€‚code-reviewer ãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®è¦ç´„ã‚’è¦šãˆã¦ã„ã‚Œã°ã€æ¯å›åŒã˜æŒ‡æ‘˜ã‚’ã—ãªãã¦æ¸ˆã‚€ã€‚explore ã¯æ¯å›æ–°é®®ã«æ¤œç´¢ã™ã‚‹æ–¹ãŒæ­£ç¢ºã€‚

## å†…éƒ¨æ§‹é€ 

ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼ã‚’è‡ªä½œã™ã‚‹äººå‘ã‘ã«ã€ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ ã‚‚å…±æœ‰ã—ã¦ãŠãã€‚

### Agent Teams ã®ãƒ•ã‚¡ã‚¤ãƒ«é…ç½®

```
~/.claude/
â”œâ”€â”€ teams/{team-name}/
â”‚   â””â”€â”€ config.json          # ãƒãƒ¼ãƒ è¨­å®šï¼ˆãƒ¡ãƒ³ãƒãƒ¼æƒ…å ±ï¼‰
â””â”€â”€ tasks/{session-id}/
    â”œâ”€â”€ .lock                # ãƒ•ã‚¡ã‚¤ãƒ«ãƒ­ãƒƒã‚¯ï¼ˆç«¶åˆé˜²æ­¢ï¼‰
    â”œâ”€â”€ .highwatermark       # ã‚¿ã‚¹ã‚¯IDæ¡ç•ª
    â”œâ”€â”€ 1.json               # ã‚¿ã‚¹ã‚¯ #1
    â”œâ”€â”€ 2.json               # ã‚¿ã‚¹ã‚¯ #2
    â””â”€â”€ ...
```

### ã‚¿ã‚¹ã‚¯ JSON

```json
{
  "id": "1",
  "subject": "èªè¨¼ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°",
  "description": "JWT â†’ ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ™ãƒ¼ã‚¹ã«å¤‰æ›´",
  "activeForm": "èªè¨¼ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ä¸­",
  "status": "in_progress",
  "blocks": ["3"],
  "blockedBy": []
}
```

`blocks` / `blockedBy` ã§ä¾å­˜é–¢ä¿‚ã‚’è¡¨ç¾ã€‚`.lock` ã§ teammate é–“ã®ã‚¯ãƒ¬ãƒ¼ãƒ ç«¶åˆã‚’é˜²æ­¢ã€‚

### o-m-cc ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³æ§‹é€ 

```
o-m-cc/
â”œâ”€â”€ agents/                    # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®šç¾©ï¼ˆteammate spawn æ™‚ã«å‚ç…§ï¼‰
â”‚   â”œâ”€â”€ capabilities.md        # ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒæˆ¦ç•¥ + èƒ½åŠ›ã‚µãƒãƒªãƒ¼
â”‚   â”œâ”€â”€ code-reviewer.md       # memory: project
â”‚   â”œâ”€â”€ security-reviewer.md   # memory: project
â”‚   â””â”€â”€ ...ï¼ˆ16ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼‰
â”œâ”€â”€ commands/                  # ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰
â”‚   â”œâ”€â”€ plan.md                # Agent Teams ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼
â”‚   â”œâ”€â”€ review.md              # Agent Teams ä¸¦åˆ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
â”‚   â””â”€â”€ ultrawork.md           # Agent Teams å¤§è¦æ¨¡ä¸¦åˆ—
â””â”€â”€ hooks/                     # è‡ªå‹•åŒ–
    â”œâ”€â”€ hooks.json
    â”œâ”€â”€ teammate-idle.sh       # TeammateIdle
    â”œâ”€â”€ task-completed.sh      # TaskCompleted
    â””â”€â”€ ...ï¼ˆ10 hooksï¼‰
```

ã‚³ãƒãƒ³ãƒ‰ã® frontmatter ã§ `allowed-tools: TeammateTool` ã‚’æŒ‡å®šã—ã€ã‚³ãƒãƒ³ãƒ‰æœ¬æ–‡ã§ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®æ‰‹é †ã‚’è‡ªç„¶è¨€èªã§è¨˜è¿°ã™ã‚‹ã€‚ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®šç¾©ã¯ `agents/{name}.md` ã«åˆ†é›¢ã—ã€spawn prompt ã‹ã‚‰å‚ç…§ã™ã‚‹æ§‹é€ ã€‚

## åˆ¶é™äº‹é …

Agent Teams ã¯ã¾ã  experimentalã€‚ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼ã‚’ä½œã‚‹éš›ã«çŸ¥ã£ã¦ãŠãã¹ãåˆ¶é™:

- **ã‚»ãƒƒã‚·ãƒ§ãƒ³å¾©å…ƒä¸å¯**: `/resume` ã§ in-process teammates ã¯å¾©å…ƒã•ã‚Œãªã„
- **1ãƒãƒ¼ãƒ /ã‚»ãƒƒã‚·ãƒ§ãƒ³**: cleanup ã—ã¦ã‹ã‚‰æ–°ãƒãƒ¼ãƒ ã‚’ä½œã‚‹å¿…è¦ã‚ã‚Š
- **ãƒã‚¹ãƒˆä¸å¯**: teammate ãŒè‡ªåˆ†ã® teammate ã‚’ spawn ã§ããªã„
- **Lead å›ºå®š**: ãƒãƒ¼ãƒ ä½œæˆè€…ãŒæ°¸ä¹…ã« Lead
- **æ¨©é™ã¯ spawn æ™‚ã«å›ºå®š**: å…¨ teammate ãŒ Lead ã®æ¨©é™ã‚’å¼•ãç¶™ã
- **split-pane ã¯ tmux/iTerm2 å¿…é ˆ**: VS Code ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã¯ä½¿ãˆãªã„

## ã¾ã¨ã‚

æ—¢å­˜ã®ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ Agent Teams ã§å¼·åŒ–ã™ã‚‹ãƒã‚¤ãƒ³ãƒˆ:

1. **spawn prompt ã«ã€Œä»– teammate ã¸ã®å…±æœ‰ã€ã‚’æ˜è¨˜** â€” ã“ã‚ŒãŒãªã„ã¨ subagent ã¨å¤‰ã‚ã‚‰ãªã„
2. **ä¸¦åˆ— spawn ã§ãã‚‹ãƒ•ã‚§ãƒ¼ã‚ºã‚’è¦‹æ¥µã‚ã‚‹** â€” ä¾å­˜é–¢ä¿‚ãŒãªã„ã‚‚ã®ã¯åŒæ™‚ spawn
3. **TaskCreate ã§å…±æœ‰ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ** â€” teammates ã®è‡ªå¾‹èª¿æ•´ã®åŸºç›¤
4. **hooks ã§è‡ªå‹•åŒ–** â€” TeammateIdle / TaskCompleted ã§ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒå›ã‚‹
5. **memory: project ã§çŸ¥è¦‹ã‚’è“„ç©** â€” ä½¿ã†ã»ã©è³¢ããªã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
6. **ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒæˆ¦ç•¥ã§ä½¿ã„åˆ†ã‘** â€” S ã¯ç›´æ¥ã€M/L ã¯ Agent Teams

o-m-cc ã¯ã¾ã ä¸»ã«è‡ªåˆ†ç”¨ã ãŒã€ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼ã‚’çµ„ã‚“ã§ã„ã‚‹äººã®å‚è€ƒã«ãªã‚Œã°ã¨æ€ã„å…¬é–‹ã—ã¦ã„ã‚‹ã€‚

GitHub: [kok1eee/o-m-cc](https://github.com/kok1eee/o-m-cc)

## å‚è€ƒ

- [Orchestrate teams of Claude Code sessions](https://code.claude.com/docs/en/agent-teams) - å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [Introducing Claude Opus 4.6](https://www.anthropic.com/news/claude-opus-4-6) - Anthropic å…¬å¼ã‚¢ãƒŠã‚¦ãƒ³ã‚¹
- [Claude Code's Hidden Multi-Agent System](https://paddo.dev/blog/claude-code-hidden-swarm/) - TeammateTool ã®å†…éƒ¨æ§‹é€ åˆ†æ
- [Anthropic releases Opus 4.6 with new 'agent teams'](https://techcrunch.com/2026/02/05/anthropic-releases-opus-4-6-with-new-agent-teams/) - TechCrunch
